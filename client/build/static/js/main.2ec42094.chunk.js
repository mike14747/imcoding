(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{107:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},189:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){},218:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(63),r=a.n(c),o=(a(90),a(1)),s=a(4),m=a(2),i=a(5),u=a.n(i),d=Object(n.createContext)(null),b=(a(107),function(){var e=Object(n.useContext)(d).user;return l.a.createElement("div",null,e&&l.a.createElement(s.b,{to:"/new"},l.a.createElement("button",{className:"add-btn"},"Add Article")))}),g=Object(n.createContext)({}),E=Object(n.createContext)(null),f=(a(112),function(){var e=Object(n.useContext)(g),t=e.hasChanged,a=e.setHasChanged,c=Object(n.useContext)(E),r=c.currentSlug,m=c.setCurrentSlug,i=Object(n.useState)(null),d=Object(o.a)(i,2),b=d[0],f=d[1];return Object(n.useEffect)((function(){t&&u.a.get("/api/articles").then((function(e){f(e.data)})).catch((function(e){console.log(e),f(null)})).finally((function(){return a(!1)}))}),[t,a]),l.a.createElement("div",{className:"d-flex justify-content-center align-items-center py-2"},b&&b.length>0&&l.a.createElement("div",{className:"navdropdown"},l.a.createElement("div",{className:"navdropbtn"},"Articles ",l.a.createElement("i",{className:"down"})),l.a.createElement("div",{className:"navdropdown-content"},b.map((function(e){return l.a.createElement("div",{className:"item",key:e._id},r&&e.slug===r?l.a.createElement(s.b,{to:"/article/"+e.slug,className:"viewing"},l.a.createElement("span",{className:"current-gt"},">"),e.title):l.a.createElement(s.b,{to:"/article/"+e.slug,onClick:function(){return m(e.slug)}},e.title))})))))}),p=(a(113),function(){var e=Object(n.useContext)(d),t=e.user,a=e.setUser;return l.a.createElement("div",null,t?l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"auth-divs"},l.a.createElement("span",{className:"small text-secondary"},"user: "),t.username),l.a.createElement("div",{className:"auth-divs"},l.a.createElement("button",{className:"auth-btn logout-btn",onClick:function(){u.a.get("/api/auth/logout").then((function(){return a(null)})).catch((function(e){return console.log(e)}))}},"Logout"))):l.a.createElement("div",{className:"auth-divs"},l.a.createElement(s.b,{to:"/login"},l.a.createElement("button",{className:"auth-btn login-btn"},"Login"))))}),v=function(){return l.a.createElement("div",{className:"container-fluid bg-lt-brown header"},l.a.createElement("div",{className:"row flex-row"},l.a.createElement("div",{className:"col-md-3 col-6 order-md-1 d-flex justify-content-start align-items-center border-bottom border-secondary py-2"},l.a.createElement(s.b,{to:"/"},l.a.createElement("img",{src:"/images/logo.png",alt:"IMCoding",className:"img-fluid"}))),l.a.createElement("div",{className:"col-md-3 col-6 order-md-4 flex-column d-flex justify-content-center border-bottom border-secondary py-2"},l.a.createElement(p,null)),l.a.createElement("div",{className:"col-md-3 col-6 order-md-2 d-flex justify-content-center align-items-center border-bottom border-secondary py-2 header-bottom"},l.a.createElement(b,null)),l.a.createElement("div",{className:"col-md-3 col-6 order-md-3 d-flex justify-content-center align-items-center border-bottom border-secondary py-2 header-bottom"},l.a.createElement(f,null))))},h=function(){return l.a.createElement("div",{className:"w-100 border-top border-secondary text-center small bg-gray6 p-2 footer"},"\xa9 2020 imcoding")},j=function(){var e=Object(n.useContext)(E).setCurrentSlug;return Object(n.useEffect)((function(){e(null)}),[e]),l.a.createElement("div",null,l.a.createElement("h1",null,"This is the homepage!"))},O=a(65),N=a.n(O),w=a(66),x=a.n(w),y=(a(189),function(){return l.a.createElement("div",{className:"loading"},l.a.createElement("img",{src:x.a,alt:"Loading"}))}),C=a(220),S=a(83),k=a(70),F=a(72),A=a(73),L=a(75),D=a(76),T=a(78),U=a(80),_=a(81);C.a.registerLanguage("jsx",k.a),C.a.registerLanguage("js",F.a),C.a.registerLanguage("json",A.a),C.a.registerLanguage("css",L.a),C.a.registerLanguage("bash",D.a),C.a.registerLanguage("sql",T.a),C.a.registerLanguage("markup",U.a),C.a.registerLanguage("ignore",_.a);var H={backgroundColor:"#eeeeee",fontSize:"1rem",margin:"0rem 1rem 1rem 1rem",padding:"0.5rem"},M=function(e){var t=e.language,a=e.value;return t||(t="text"),l.a.createElement(C.a,{language:t,style:S.a,customStyle:H},a)},P=function(){var e=Object(m.g)().slug,t=Object(n.useContext)(d).user,a=Object(n.useContext)(g).setHasChanged,c=Object(n.useState)(null),r=Object(o.a)(c,2),i=r[0],b=r[1],f=Object(n.useState)(!1),p=Object(o.a)(f,2),v=p[0],h=p[1],j=Object(n.useState)(!1),O=Object(o.a)(j,2),w=O[0],x=O[1],C=Object(n.useState)(0),S=Object(o.a)(C,2),k=S[0],F=S[1],A=Object(n.useContext)(E).setCurrentSlug;Object(n.useEffect)((function(){u.a.get("/api/articles/"+e).then((function(t){t.data[0]?(b(t.data[0]),A(e)):(b(null),A(null))})).catch((function(e){console.log(e.message),b(null),A(null)})).finally((function(){F(0),x(!1),h(!0)}))}),[e,A]);return w?l.a.createElement("h4",{className:"m-5 text-center text-danger"},"The article was successfully deleted!"):v&&!i?l.a.createElement(m.a,{to:"/article"}):l.a.createElement(n.Fragment,null,v?l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"border-bottom mb-4"},l.a.createElement("h1",{className:"mb-1 text-uppercase"},i.title)),l.a.createElement("div",{className:"small mb-2"},l.a.createElement("span",null,"Created: ",i.createdAt),i.updatedAt&&i.updatedAt>i.createdAt&&l.a.createElement("span",{className:"ml-4 font-italic"},"Updated: ",i.updatedAt)),l.a.createElement("div",{className:"row mb-4"},l.a.createElement("div",{className:"col-6"},i.description&&i.description),t&&l.a.createElement("div",{className:"col-6 d-flex justify-content-end align-items-end"},l.a.createElement("div",null,l.a.createElement(s.b,{to:"/edit/"+e},l.a.createElement("button",null,"Edit this article"))),l.a.createElement("div",null,l.a.createElement("button",{onClick:function(){0===k?F(1):u.a.delete("/api/articles/"+i._id).then((function(){a(!0),x(!0),F(0),A(null)})).catch((function(e){return console.log(e.message)}))},className:"ml-4"},"Delete this article"),1===k&&l.a.createElement("div",{className:"text-danger text-right"},"Are you sure?")))),l.a.createElement("div",{className:"border-top pt-4"},l.a.createElement(N.a,{source:i.markdown,renderers:{code:M}}))):l.a.createElement(y,null))},B=a(16),I=a(17),J=function(){var e=Object(m.g)().slug,t=Object(n.useState)({_id:"",title:"",description:"",markdown:"",slug:""}),a=Object(o.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(!1),i=Object(o.a)(s,2),d=i[0],b=i[1],g=Object(n.useState)(!1),E=Object(o.a)(g,2),f=E[0],p=E[1],v=Object(n.useState)(!0),h=Object(o.a)(v,2),j=h[0],O=h[1],N=Object(n.useState)(null),w=Object(o.a)(N,2),x=w[0],C=w[1],S=Object(n.useState)(null),k=Object(o.a)(S,2),F=k[0],A=k[1];Object(n.useEffect)((function(){u.a.get("/api/articles/"+e).then((function(e){e.data[0]?r(e.data[0]):O(!1)})).catch((function(e){return console.log(e)})).finally((function(){return b(!0)}))}),[e]);var L=function(e){var t=e.target,a=t.name,n=t.value;r(Object(I.a)(Object(I.a)({},c),{},Object(B.a)({},a,n)))};return f&&F?l.a.createElement(m.a,{to:"/article/"+F}):d&&!j?l.a.createElement(m.a,{to:"/edit"}):l.a.createElement(n.Fragment,null,l.a.createElement("h2",null,"Edit an article"),d?l.a.createElement(n.Fragment,null,x&&l.a.createElement("h4",{className:"text-danger"},x),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),u.a.put("/api/articles",{_id:c._id,title:c.title,description:c.description,markdown:c.markdown,slug:c.slug}).then((function(e){C(null),A(e.data.slug),p(!0)})).catch((function(e){C(e.response.data)}))}},l.a.createElement("div",{className:"mb-4"},l.a.createElement("label",{htmlFor:"title"},"Title"),l.a.createElement("input",{className:"w-100 mw-100",type:"text",name:"title",id:"title",value:c.title,onChange:L})),l.a.createElement("div",{className:"mb-4"},l.a.createElement("label",{htmlFor:"description"},"Description"),l.a.createElement("textarea",{name:"description",id:"description",value:c.description,onChange:L})),l.a.createElement("div",{className:"mb-4"},l.a.createElement("label",{htmlFor:"markdown"},"Markdown"),l.a.createElement("textarea",{className:"markdown",name:"markdown",id:"markdown",value:c.markdown,onChange:L})),l.a.createElement("div",{className:"mb-4"},l.a.createElement("button",{type:"submit"},"Submit")))):l.a.createElement(y,null))},W=function(){var e=Object(n.useContext)(g).setHasChanged,t=Object(n.useState)({title:"",description:"",markdown:""}),a=Object(o.a)(t,2),c=a[0],r=a[1],s=Object(n.useContext)(E).setCurrentSlug;Object(n.useEffect)((function(){s(null)}),[s]);var i=Object(n.useState)(null),d=Object(o.a)(i,2),b=d[0],f=d[1],p=function(e){var t=e.target,a=t.name,n=t.value;r(Object(I.a)(Object(I.a)({},c),{},Object(B.a)({},a,n)))};return b?l.a.createElement(m.a,{to:"/article/"+b}):l.a.createElement(n.Fragment,null,l.a.createElement("h2",null,"Add a new article"),l.a.createElement("form",{onSubmit:function(t){t.preventDefault(),u.a.post("/api/articles",{title:c.title,description:c.description,markdown:c.markdown}).then((function(t){e(!0),f(t.data.slug)})).catch((function(e){return console.log(e)}))}},l.a.createElement("div",{className:"mb-4"},l.a.createElement("label",{htmlFor:"title"},"Title"),l.a.createElement("input",{className:"w-100 mw-100",type:"text",name:"title",id:"title",value:c.title,onChange:p})),l.a.createElement("div",{className:"mb-4"},l.a.createElement("label",{htmlFor:"description"},"Description"),l.a.createElement("textarea",{name:"description",id:"description",value:c.description,onChange:p})),l.a.createElement("div",{className:"mb-4"},l.a.createElement("label",{htmlFor:"markdown"},"Markdown"),l.a.createElement("textarea",{className:"markdown",name:"markdown",id:"markdown",value:c.markdown,onChange:p})),l.a.createElement("div",{className:"mb-4"},l.a.createElement("button",{type:"submit"},"Submit"))))},q=function(){return l.a.createElement("div",{className:"m-5 bigger"},l.a.createElement("p",{className:"text-danger"},l.a.createElement("b",null,"Error 404!")),l.a.createElement("p",null,"An error has occurred."),l.a.createElement("p",null,"The page you are looking for does not exist!"))},z=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(""),s=Object(o.a)(r,2),m=s[0],i=s[1],b=Object(n.useState)(null),g=Object(o.a)(b,2),f=g[0],p=g[1],v=Object(n.useContext)(d).setUser,h=Object(n.useContext)(E).setCurrentSlug;Object(n.useEffect)((function(){h(null)}),[h]);return l.a.createElement("div",null,l.a.createElement("h1",null,"Login to Add, Edit or Delete Articles"),l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a.length>0&&m.length>0&&u.a.post("/api/auth/login",{username:a,password:m}).then((function(e){299===e.status?p(e.data.message):v(e.data.user)})).catch((function(e){p(null),console.log(e)}))}},l.a.createElement("div",{className:"my-4"},l.a.createElement("label",{htmlFor:"username"},"Username"),l.a.createElement("input",{type:"text",id:"username",name:"username",value:a,onChange:function(e){return c(e.target.value)}})),l.a.createElement("div",{className:"my-4"},l.a.createElement("label",{htmlFor:"password"},"Password"),l.a.createElement("input",{type:"password",id:"password",name:"password",value:m,onChange:function(e){return i(e.target.value)}})),l.a.createElement("div",{className:"my-4"},l.a.createElement("button",{type:"submit"},"Submit"))),f&&l.a.createElement("p",{className:"text-danger"},f))},$=a(84),G=function(e){var t=e.user,a=e.component,n=Object($.a)(e,["user","component"]);return l.a.createElement(m.b,Object.assign({},n,{render:function(e){return t?l.a.createElement(a,e):l.a.createElement(m.a,{to:{pathname:"/login"}})}}))};a(215),a(216),a(217);var K=function(){var e=Object(n.useState)(null),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!0),i=Object(o.a)(r,2),b=i[0],f=i[1],p=Object(n.useState)(!1),O=Object(o.a)(p,2),N=O[0],w=O[1],x=Object(n.useState)(null),C=Object(o.a)(x,2),S=C[0],k=C[1];return Object(n.useEffect)((function(){u.a.get("/api/auth/status").then((function(e){c(e.data.user)})).catch((function(e){console.log(e),c(null)})).finally((function(){return w(!0)}))}),[]),N?l.a.createElement(s.a,null,l.a.createElement(d.Provider,{value:{user:a,setUser:c}},l.a.createElement(E.Provider,{value:{currentSlug:S,setCurrentSlug:k}},l.a.createElement(g.Provider,{value:{hasChanged:b,setHasChanged:f}},l.a.createElement(v,null),l.a.createElement("div",{className:"container py-4 flex-fill bg-white main-container"},l.a.createElement(m.d,null,l.a.createElement(m.b,{exact:!0,path:"/",component:j}),l.a.createElement(m.b,{exact:!0,path:"/article/:slug",component:P}),l.a.createElement(G,{exact:!0,path:"/new",user:a,component:W}),l.a.createElement(G,{exact:!0,path:"/edit/:slug",user:a,component:J}),l.a.createElement(m.b,{exact:!0,path:"/login"},a?l.a.createElement(m.a,{to:"/"}):l.a.createElement(z,null)),l.a.createElement(m.b,{component:q}))),l.a.createElement(h,null))))):l.a.createElement("div",{className:"m-5"},l.a.createElement(y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},66:function(e,t,a){e.exports=a.p+"static/media/loading.22c1253b.gif"},85:function(e,t,a){e.exports=a(218)},90:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.2ec42094.chunk.js.map